@@ -0,0 +1,101 @@
<!DOCTYPE html>
<!-- saved from url=(0033)http://raphaeljs.com/touches.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Raphaël · Drag-n-drop</title>
<link rel="stylesheet" href="./Rapwee_files/demo.css" type="text/css" media="screen">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon-precomposed" href="http://raphaeljs.com/Raphael.png">
<link rel="stylesheet" href="./Rapwee_files/demo-print.css" type="text/css" media="print">
<script src="./Rapwee_files/raphael.js"></script>
<script>
window.onload = function () {
  var R = Raphael(0, 0, "100%", "100%"),
  battery=R.image("Battery.png",0,300,389,195); 
  battery.rotate(270);
  wiret=R.image("wire.png",500,100,500,80);
  wireb=R.image("wire.png",500,500,500,80);
                    //var blocks=[battery,wireb,wiret];
                    var top=[5][5];
                    var left=[5][5];
                    var bottom=[5][5];
                    var right=[5][5];

                   // redled=R.image("Red LED.svg",600,600,389,195);
                   var start = function () {
                    this.ox = this.attr("x");
                    this.oy = this.attr("y");

                  },
                leftTerminal=function(blockB)
                    {   cx=blockB.left;
                        cy=(w1.top+w1.bottom)/2;
                      if(blockB.width>blockB.height){

                        R.circle(cx,cy,10); //horizontal left center
                        R.circle(cx+20,cy+20,10);// horizontal left bottom
                        R.circle(cx+20,cy-20,10);//horizontal left top
                        left[0][0]=cx;
                        left[0][1]=cy;
                        left[1][0]=cx+20;
                        left[1][1]=cy+20;
                        left[2][0]=cx+20;
                        left[2][1]=cy-20;
                        left[3][0]=cx+40/3;
                        left[3][1]=cy;
                      }
                      
                    }, 
                    rightTerminal=function(blockB)
                    {   cx=blockB.left;
                        cy=(w1.top+w1.bottom)/2;
                      if(blockB.width>blockB.height){

                        R.circle(cx,cy,10); //horizontal left center
                        R.circle(cx+20,cy+20,10);// horizontal left bottom
                        R.circle(cx+20,cy-20,10);//horizontal left top
                        right[0][0]=cx;
                        right[0][1]=cy;
                        right[1][0]=cx+20;
                        right[1][1]=cy+20;
                        right[2][0]=cx+20;
                        right[2][1]=cy-20;
                        right[3][0]=cx+40/3;
                        right[3][1]=cy;
                      }
                      
                    }, 

                    topTerminal=function(blockB)
                    {

                      var w2=blockB.node.getBoundingClientRect();
                      w2cy=(w2.top+w2.bottom)/4;
                      w2cx=(w2.right+w2.left)/2;
                      w1cx=(w2.right+w2.left)/2;
                      w1cy=(w2.bottom);
                      if(blockB.height>blockB.width){
                      R.circle(w2cx,w2.top,10);//circle top
                      R.circle(w2cx-20,w2.top+20,10);//circle top left
                      R.circle(w2cx+20,w2.top+20,10);//circle top right

                        top[0][0]=w2cx;
                        top[0][1]=w2.top;
                        top[1][0]=w2cx-20;
                        top[1][1]=w2.top+20;
                        top[2][0]=w2cx+20;
                        top[2][1]=w2.top+20;
                        top[3][0]=w2cx;
                        top[3][1]=w2.top+40/3;
                    }

                  },
bottomTerminal=function(blockB)
{

  var w2=blockB.node.getBoundingClientRect();
  if(block.width>block.height){

    w2cy=(w2.top+w2.bottom)/4;
    w2cx=(w2.right+w2.left)/2;
    w1cx=(w2.right+w2.left)/2;
    w1cy=(w2.bottom);
                        R.circle(w2cx,w1cy,10);//circle bottom
  R.circle(w2cx+20,w2.bottom-20,10);//circle bottom right
  R.circle(w2cx-20,w2.bottom-20,10);//circle bottom left

  bottom[0][0]=w2cx;
  bottom[0][1]=w1cy;
  bottom[1][0]=w2cx+20;
  bottom[1][1]=w1cy-20;
  bottom[2][0]=w2cx-20;
  bottom[2][1]=w1cy-20;
  bottom[3][0]=w2cx;
  bottom[3][1]=w1cy-40/3;
}

},
checkMinimum = function(a,b,c)
{
  if((a<b)&&(a<c))
    return 'a';
  else if(b<c && b<a)
    return 'b';
  else
    return 'c';
},
move = function (dx, dy) {
  var w1=this.node.getBoundingClientRect();
  if(w1.height>w1.width)
  {
    topTerminal(w1);
    bottomTerminal(w1);
    var top_centroid_x=top[3][0];
    var top_centroid_y=top[3][1];
    var bottom_centroid_x=bottom[3][0];
    var bottom_centroid_y=bottom[3][1];
  }
  else
  {
    leftTerminal(w1);
    rightTerminal(w1);
    var left_centroid_x=left[3][0];
    var left_centroid_y=left[3][1];
    var right_centroid_x=right[3][0];
    var right_centroid_y=right[3][1];

  }

  for(var i=0;i<blocks.length;i++)
  {
    if(blocks[i]!==this)
    {
      var w2=blocks[i].node.getBoundingClientRect();
    

     if(w2.height>w2.width)//vertical
      {
  R.circle(w2cx,w2.top,10);//circle top
  R.circle(w2cx-20,w2.top+20,10);//circle top left
  R.circle(w2cx+20,w2.top+20,10);//circle top right

    R.circle(w2cx,w1cy,10);//circle bottom
  R.circle(w2cx+20,w2.bottom-20,10);//circle bottom right
  R.circle(w2cx-20,w2.bottom-20,10);//circle bottom left


  topTerminal(w1);
  bottomTerminal(w1);
  if(x is decreasing){
    var distance_from_top_right=Math.sqrt(Math.pow((left_centroid_x-(w2cx+20)),2)+Math.pow((left_centroid_y-(w2.top+20)),2));
    var distance_from_top_left=Math.sqrt(Math.pow((left_centroid_x-(w2cx-20)),2)+Math.pow((left_centroid_y-(w2.top+20)),2));
    var distance_from_top_top=Math.sqrt(Math.pow((left_centroid_x-(w2cx)),2)+Math.pow((left_centroid_y-w2.top),2));



    var distance_from_bottom_right=Math.sqrt(Math.pow((left_centroid_x-(w2cx+20)),2)+Math.pow((left_centroid_y-(w2.bottom-20)),2));
    var distance_from_bottom_left=Math.sqrt(Math.pow((left_centroid_x-(w2cx-20)),2)+Math.pow((left_centroid_y-(w2.bottom-20)),2));
    var distance_from_bottom_bottom=Math.sqrt(Math.pow((left_centroid_x-(w2cx)),2)+Math.pow((left_centroid_y-w2.bottom),2));

    var min=checkMinimum(distance_from_top_right,distance_from_top_left,distance_from_top_top,distance_from_bottom_right,distance_from_bottom_left,distance_from_bottom_bottom);


    switch(min){
      case 'a': this.animate({transform: 't-40,0'},1000);
      break;

      case 'b': this.animate({transform: 't-40,0'},1000);
      break;

      case 'c': this.animate({transform: 't-40,0'},1000);
      break;

      case 'd':
      break;

      case 'e':
      break;

      case 'f':
      break;
    };


  }
  else // x is increasing
  {
    var distance_from_top_right=Math.sqrt(Math.pow((right_centroid_x-(w2cx+20)),2)+Math.pow((right_centroid_y-(w2.top+20)),2));
    var distance_from_top_left=Math.sqrt(Math.pow((right_centroid_x-(w2cx-20)),2)+Math.pow((right_centroid_y-(w2.top+20)),2));
    var distance_from_top_top=Math.sqrt(Math.pow((right_centroid_x-(w2cx)),2)+Math.pow((right_centroid_y-w2.top),2));


    var distance_from_bottom_right=Math.sqrt(Math.pow((right_centroid_x-(w2cx+20)),2)+Math.pow((right_centroid_y-(w2.bottom-20)),2));
    var distance_from_bottom_left=Math.sqrt(Math.pow((right_centroid_x-(w2cx-20)),2)+Math.pow((right_centroid_y-(w2.bottom-20)),2));
    var distance_from_bottom_bottom=Math.sqrt(Math.pow((right_centroid_x-(w2cx)),2)+Math.pow((right_centroid_y-w2.bottom),2));


    var min=checkMinimum(distance_from_top_right,distance_from_top_left,distance_from_top_top,distance_from_bottom_right,distance_from_bottom_left,distance_from_bottom_bottom);

    switch(min){

      case 'a': this.animate({transform: 't-40,0'},1000);
      break;

      case 'b': this.animate({transform: 't-40,0'},1000);
      break;

      case 'c': this.animate({transform: 't-40,0'},1000);
      break;

      case 'd':
      break;

      case 'e':
      break;

      case 'f':

    };


  }

  

}//vertical close
else
{ //horizontally placed block
  thiscx=w2.left;
  thiscy=(w2.top+w2.bottom)/2;
R.circle(thiscx,thiscy,10); //horizontal left center
R.circle(thiscx+20,thiscy+20,10);// horizontal left bottom
R.circle(thiscx+20,thiscy-20,10);//horizontal left top
 R.circle(thiscx+40/3,thiscy,5);//
 leftTerminal(w1);
 rightTerminal(w1);
 if(y decreasing)
 {
  var distance_from_left_bottom=Math.sqrt(Math.pow((top_centroid_x-(thiscx+20)),2)+Math.pow((top_centroid_y-(thiscy+20)),2));
  var distance_from_left_top=Math.sqrt(Math.pow((top_centroid_x-(thiscx+20)),2)+Math.pow((top_centroid_y-(thiscy-20)),2));
  var distance_from_left_left=Math.sqrt(Math.pow((top_centroid_x-(thiscx)),2)+Math.pow((left_centroid_y-thiscy),2));

  var distance_from_right_bottom=Math.sqrt(Math.pow((top_centroid_x-(w2.right-20)),2)+Math.pow((top_centroid_y-(thiscy+20)),2));
  var distance_from_right_top=Math.sqrt(Math.pow((top_centroid_x-(w2.right-20)),2)+Math.pow((top_centroid_y-(thiscy-20)),2));
  var distance_from_right_right=Math.sqrt(Math.pow((top_centroid_x-(w2.right)),2)+Math.pow((left_centroid_y-thiscy),2));


  var min=checkMinimum(distance_from_left_bottom,distance_from_left_top,distance_from_left_left,distance_from_right_bottom,distance_from_right_top,distance_from_right_right);



  switch(min){

    case 'a': this.animate({transform: 't-40,0'},1000);
    break;

    case 'b': this.animate({transform: 't-40,0'},1000);
    break;

    case 'c': this.animate({transform: 't-40,0'},1000);
    break;

    case 'd':
    break;

    case 'e':
    break;

    case 'f':

  };



}
else
{//y increasing

 var distance_from_left_bottom=Math.sqrt(Math.pow((bottom_centroid_x-(thiscx+20)),2)+Math.pow((bottom_centroid_y-(thiscy+20)),2));
 var distance_from_left_top=Math.sqrt(Math.pow((bottom_centroid_x-(thiscx+20)),2)+Math.pow((bottom_centroid_y-(thiscy-20)),2));
 var distance_from_left_left=Math.sqrt(Math.pow((bottom_centroid_x-(thiscx)),2)+Math.pow((bottom_centroid_y-thiscy),2));

 var distance_from_right_bottom=Math.sqrt(Math.pow((bottom_centroid_x-(w2.right-20)),2)+Math.pow((bottom_centroid_y-(thiscy+20)),2));
 var distance_from_right_top=Math.sqrt(Math.pow((bottom_centroid_x-(w2.right-20)),2)+Math.pow((bottom_centroid_y-(thiscy-20)),2));
 var distance_from_right_right=Math.sqrt(Math.pow((bottom_centroid_x-(w2.right)),2)+Math.pow((bottom_centroid_y-thiscy),2));


 var min=checkMinimum(distance_from_left_bottom,distance_from_left_top,distance_from_left_left,distance_from_right_bottom,distance_from_right_top,distance_from_right_right);



 switch(min){

  case 'a': this.animate({transform: 't-40,0'},1000);
  break;

  case 'b': this.animate({transform: 't-40,0'},1000);
  break;

  case 'c': this.animate({transform: 't-40,0'},1000);
  break;

  case 'd':
  break;

  case 'e':
  break;

  case 'f':

};
}
}//horizontally close


}


else{
  continue;
}
}
},
up = function (dx1,dy1) {
        // restoring state
        var trans_x = dx1-this.ox1;
        var trans_y = dy1-this.oy1;
        this.translate(trans_x,trans_y);

        this.ox1 = dx1;
        this.oy1 = dy1;         
      };



   /*   movet = function (dx, dy) {
        var w1=this.node.getBoundingClientRect();




        for(var i=0;i<blocks.length;i++)
        {
          for(var j=0;j<blocks.length;j++)
          {
            if(blocks[j]!==this)

            {
 // console.log("whats up");
 var w2=blocks[j].node.getBoundingClientRect();
 w2cx=(w2.right+w2.left)/2;
//console.log(w2cx);
if((Math.abs(w1.left-w2cx)<10))
{

       // if(Math.abs(w1.bottom-w2.top)<20){
       // console.log('w1left');
        //console.log(w1.left);
        sdx=dx1;
               //console.log(dx);
               sdy=dy1;
      //dy2=batt.bottom-w1.top+100;
      this.animate(

        { transform: 't'+dx1+','+dy1},1000);


      // }
       /* else
          if(Math.abs(w1.top-w2.bottom)<20){
             dx=-w2.right;
      dy=w2.bottom-w1.top+50;
      //dy2=batt.bottom-w1.top+100;
  this.animate(

  { transform: 't'+dx+','+dy},1000);


} 


}
else
{
 this.attr({x: this.ox + dx, y: this.oy + dy});

}


}
}
}
};*/
              //  up = function () {

               // };
               battery.drag(movet, start);
               wiret.drag(move,start,up);
               wireb.drag(move,start,up);
             };
             </script>
           </head>
           <body>
            <div id="holder"></div>
            <p id="copy">Demo of <a href="http://raphaeljs.com/">Raphaël</a>—JavaScript Vector Library</p>

            <svg height="100%" version="1.1" width="100%" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: absolute; left: 0px; top: 0px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.2</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs></svg></body></html>
            No newline at end of file

